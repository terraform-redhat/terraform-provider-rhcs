---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "rhcs_cluster_rosa_hcp Resource - terraform-provider-rhcs"
subcategory: ""
description: |-
  OpenShift managed cluster using ROSA HCP.
---

# rhcs_cluster_rosa_hcp (Resource)

OpenShift managed cluster using ROSA HCP.

## Example Usage

```terraform
locals {
  sts_roles = {
    role_arn         = "arn:aws:iam::account-id-123:role/account-prefix-HCP-ROSA-Installer-Role",
    support_role_arn = "arn:aws:iam::account-id-123:role/account-prefix-HCP-ROSA-Support-Role",
    instance_iam_roles = {
      worker_role_arn = "arn:aws:iam::account-id-123:role/account-prefix-HCP-ROSA-Worker-Role"
    },
    operator_role_prefix = "operator-prefix",
    oidc_config_id       = "oidc-config-id-123"
  }
}


resource "rhcs_cluster_rosa_hcp" "rosa_sts_cluster" {
  name                   = "my-cluster"
  cloud_region           = "us-east-2"
  aws_account_id         = "123456789012"
  aws_billing_account_id = "123456789012"
  aws_subnet_ids         = ["subnet-1", "subnet-2"]
  availability_zones     = ["us-west-2a", "us-west-2b"]
  replicas               = 2
  version                = "4.15.9"
  properties = {
    rosa_creator_arn = "aws_caller_identity-current-arn"
  }
  sts                                 = local.sts_roles
  wait_for_create_complete            = true
  wait_for_std_compute_nodes_complete = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `availability_zones` (List of String) Availability zones. This attribute specifically applies to the Worker Machine Pool and becomes irrelevant once the resource is created. Any modifications to the initial Machine Pool should be made through the Terraform imported Machine Pool resource. For more details, refer to [Worker Machine Pool in ROSA Cluster](../guides/worker-machine-pool.md)
- `aws_account_id` (String) Identifier of the AWS account. After the creation of the resource, it is not possible to update the attribute value.
- `aws_billing_account_id` (String) Identifier of the AWS account for billing. After the creation of the resource, it is not possible to update the attribute value.
- `aws_subnet_ids` (List of String) AWS subnet IDs. After the creation of the resource, it is not possible to update the attribute value.
- `cloud_region` (String) AWS region identifier, for example 'us-east-1'.
- `name` (String) Name of the cluster. Cannot exceed 54 characters in length. After the creation of the resource, it is not possible to update the attribute value.
- `sts` (Attributes) STS configuration. (see [below for nested schema](#nestedatt--sts))

### Optional

- `admin_credentials` (Attributes) Admin user credentials. After the creation of the resource, it is not possible to update the attribute value. (see [below for nested schema](#nestedatt--admin_credentials))
- `aws_additional_allowed_principals` (List of String) AWS additional allowed principals.
- `aws_additional_compute_security_group_ids` (List of String) AWS additional compute security group ids.
- `base_dns_domain` (String) Base DNS domain name previously reserved, e.g. '1vo8.p3.openshiftapps.com'. After the creation of the resource, it is not possible to update the attribute value.
- `channel_group` (String) Name of the channel group where you select the OpenShift cluster version, for example 'stable'. For ROSA, only 'stable' is supported. After the creation of the resource, it is not possible to update the attribute value.
- `compute_machine_type` (String) Identifies the machine type used by the initial worker nodes, for example `m5.xlarge`. Use the `rhcs_machine_types` data source to find the possible values. This attribute specifically applies to the Worker Machine Pool and becomes irrelevant once the resource is created. Any modifications to the initial Machine Pool should be made through the Terraform imported Machine Pool resource. For more details, refer to [Worker Machine Pool in ROSA Cluster](../guides/worker-machine-pool.md)
- `create_admin_user` (Boolean) Indicates if create cluster admin user. Set it true to create cluster admin user with default username `cluster-admin` and generated password. It will be ignored if `admin_credentials` is set.After the creation of the resource, it is not possible to update the attribute value.
- `destroy_timeout` (Number) This value sets the maximum duration in minutes to allow for destroying resources. Default value is 60 minutes.
- `disable_waiting_in_destroy` (Boolean) Disable addressing cluster state in the destroy resource. Default value is false, and so a `destroy` will wait for the cluster to be deleted.
- `domain_prefix` (String) The domain prefix is optionally assigned by the user.It will appear in the Cluster's domain when the cluster is provisioned. If not supplied, it will be auto generated. It cannot exceed 15 characters in length. After the creation of the resource, it is not possible to update the attribute value.
- `ec2_metadata_http_tokens` (String) This value determines which EC2 Instance Metadata Service mode to use for EC2 instances in the cluster.This can be set as `optional` (IMDS v1 or v2) or `required` (IMDSv2 only).After the creation of the resource, it is not possible to update the attribute value.
- `etcd_encryption` (Boolean) Encrypt etcd data. Note that all AWS storage is already encrypted. After the creation of the resource, it is not possible to update the attribute value.
- `etcd_kms_key_arn` (String) Used for etcd encryption. The key ARN is the Amazon Resource Name (ARN) of a AWS Key Management Service (KMS) Key. It is a unique, fully qualified identifier for the AWS KMS Key. A key ARN includes the AWS account, Region, and the key ID(optional). After the creation of the resource, it is not possible to update the attribute value.
- `host_prefix` (Number) Length of the prefix of the subnet assigned to each node. After the creation of the resource, it is not possible to update the attribute value.
- `kms_key_arn` (String) Used to encrypt root volume of compute node pools. The key ARN is the Amazon Resource Name (ARN) of a AWS Key Management Service (KMS) Key. It is a unique, fully qualified identifier for the AWS KMS Key. A key ARN includes the AWS account, Region, and the key ID(optional). After the creation of the resource, it is not possible to update the attribute value.
- `machine_cidr` (String) Block of IP addresses for nodes. After the creation of the resource, it is not possible to update the attribute value.
- `pod_cidr` (String) Block of IP addresses for pods. After the creation of the resource, it is not possible to update the attribute value.
- `private` (Boolean) Provides private connectivity from your cluster's VPC to Red Hat SRE, without exposing traffic to the public internet. After the creation of the resource, it is not possible to update the attribute value.
- `properties` (Map of String) User defined properties. It is essential to include property 'role_creator_arn' with the value of the user creating the cluster. Example: properties = {rosa_creator_arn = data.aws_caller_identity.current.arn}
- `proxy` (Attributes) proxy (see [below for nested schema](#nestedatt--proxy))
- `registry_config` (Attributes) Registry configuration for this cluster. (see [below for nested schema](#nestedatt--registry_config))
- `replicas` (Number) Number of worker/compute nodes to provision. Requires that the number supplied be a multiple of the number of private subnets. This attribute specifically applies to the Worker Machine Pool and becomes irrelevant once the resource is created. Any modifications to the initial Machine Pool should be made through the Terraform imported Machine Pool resource. For more details, refer to [Worker Machine Pool in ROSA Cluster](../guides/worker-machine-pool.md)
- `service_cidr` (String) Block of IP addresses for the cluster service network. After the creation of the resource, it is not possible to update the attribute value.
- `shared_vpc` (Attributes) Shared VPC configuration.After the creation of the resource, it is not possible to update the attribute value. (see [below for nested schema](#nestedatt--shared_vpc))
- `tags` (Map of String) Apply user defined tags to all cluster resources created in AWS. After the creation of the resource, it is not possible to update the attribute value.
- `upgrade_acknowledgements_for` (String) Indicates acknowledgement of agreements required to upgrade the cluster version between minor versions (e.g. a value of "4.12" indicates acknowledgement of any agreements required to upgrade to OpenShift 4.12.z from 4.11 or before).
- `version` (String) Desired version of OpenShift for the cluster, for example '4.11.0'. If version is greater than the currently running version, an upgrade will be scheduled.
- `wait_for_create_complete` (Boolean) Wait until the cluster is either in a ready state or in an error state. The waiter has a timeout of 45 minutes, with the default value set to false
- `wait_for_std_compute_nodes_complete` (Boolean) Wait until the cluster standard compute pools are created. The waiter has a timeout of 60 minutes, with the default value set to false. This can only be provided when also waiting for create completion.
- `worker_disk_size` (Number) Compute node root disk size, in GiB. This attribute specifically applies to the Worker Machine Pool and becomes irrelevant once the resource is created. Any modifications to the initial Machine Pool should be made through the Terraform imported Machine Pool resource. For more details, refer to [Worker Machine Pool in ROSA Cluster](../guides/worker-machine-pool.md)

### Read-Only

- `api_url` (String) URL of the API server.
- `console_url` (String) URL of the console.
- `current_version` (String) The currently running version of OpenShift on the cluster, for example '4.11.0'.
- `domain` (String) DNS domain of cluster.
- `external_id` (String) Unique external identifier of the cluster. After the creation of the resource, it is not possible to update the attribute value.
- `id` (String) Unique identifier of the cluster.
- `ocm_properties` (Map of String) Merged properties defined by OCM and the user defined 'properties'.
- `state` (String) State of the cluster.

<a id="nestedatt--sts"></a>
### Nested Schema for `sts`

Required:

- `instance_iam_roles` (Attributes) Instance IAM Roles (see [below for nested schema](#nestedatt--sts--instance_iam_roles))
- `operator_role_prefix` (String) Operator IAM Role prefix
- `role_arn` (String) Installer Role
- `support_role_arn` (String) Support Role

Optional:

- `oidc_config_id` (String) OIDC Configuration ID
- `oidc_endpoint_url` (String) OIDC Endpoint URL

Read-Only:

- `thumbprint` (String) SHA1-hash value of the root CA of the issuer URL

<a id="nestedatt--sts--instance_iam_roles"></a>
### Nested Schema for `sts.instance_iam_roles`

Required:

- `worker_role_arn` (String) Worker/Compute Node Role ARN



<a id="nestedatt--admin_credentials"></a>
### Nested Schema for `admin_credentials`

Optional:

- `password` (String, Sensitive) Admin password that will be created with the cluster.
- `username` (String) Admin username that will be created with the cluster.


<a id="nestedatt--proxy"></a>
### Nested Schema for `proxy`

Optional:

- `additional_trust_bundle` (String) A string containing a PEM-encoded X.509 certificate bundle that will be added to the nodes' trusted certificate store. To reset please provide '' (empty string)
- `http_proxy` (String) HTTP proxy. To reset please provide '' (empty string)
- `https_proxy` (String) HTTPS proxy. To reset please provide '' (empty string)
- `no_proxy` (String) No proxy. To reset please provide '' (empty string)


<a id="nestedatt--registry_config"></a>
### Nested Schema for `registry_config`

Optional:

- `additional_trusted_ca` (Map of String) additional_trusted_ca is a map containing the registry hostname as the key, and the PEM-encoded certificate as the value, for each additional registry CA to trust.
- `allowed_registries_for_import` (Attributes List) allowed_registries_for_import limits the container image registries that normal users may import images from. Set this list to the registries that you trust to contain valid Docker images and that you want applications to be able to import from. (see [below for nested schema](#nestedatt--registry_config--allowed_registries_for_import))
- `platform_allowlist_id` (String) platform_allowlist_id contains a reference to a RegistryAllowlist which is a list of internal registries which needs to be whitelisted for the platform to work. It can be omitted at creation and updating and its lifecycle can be managed separately if needed.
- `registry_sources` (Attributes) registry_sources contains configuration that determines how the container runtime should treat individual registries when accessing images for builds+pods. (e.g. whether or not to allow insecure access).  It does not contain configuration for the internal cluster registry. (see [below for nested schema](#nestedatt--registry_config--registry_sources))

<a id="nestedatt--registry_config--allowed_registries_for_import"></a>
### Nested Schema for `registry_config.allowed_registries_for_import`

Optional:

- `domain_name` (String) domain_name specifies a domain name for the registry
- `insecure` (Boolean) insecure indicates whether the registry is secure (https) or insecure (http). By default (if not specified) the registry is assumed as secure.


<a id="nestedatt--registry_config--registry_sources"></a>
### Nested Schema for `registry_config.registry_sources`

Optional:

- `allowed_registries` (List of String) allowed_registries: registries for which image pull and push actions are allowed. To specify all subdomains, add the asterisk (*) wildcard character as a prefix to the domain name. For example, *.example.com. You can specify an individual repository within a registry. For example: reg1.io/myrepo/myapp:latest. All other registries are blocked. Mutually exclusive with `BlockedRegistries`
- `blocked_registries` (List of String) blocked_registries: registries for which image pull and push actions are denied. To specify all subdomains, add the asterisk (*) wildcard character as a prefix to the domain name. For example, *.example.com. You can specify an individual repository within a registry. For example: reg1.io/myrepo/myapp:latest. All other registries are allowed. Mutually exclusive with `AllowedRegistries`
- `insecure_registries` (List of String) insecure_registries are registries which do not have a valid TLS certificate or only support HTTP connections. To specify all subdomains, add the asterisk (*) wildcard character as a prefix to the domain name. For example, *.example.com. You can specify an individual repository within a registry. For example: reg1.io/myrepo/myapp:latest.



<a id="nestedatt--shared_vpc"></a>
### Nested Schema for `shared_vpc`

Required:

- `ingress_private_hosted_zone_id` (String) ID assigned by AWS to private Route 53 hosted zone associated with intended shared VPC, e.g. 'Z05646003S02O1ENCDCSN'.
- `route53_role_arn` (String) AWS IAM role ARN with a policy attached, granting permissions necessary to create and manage Route 53 DNS records in private Route 53 hosted zone associated with intended shared VPC.
- `vpce_role_arn` (String) AWS IAM role ARN with a policy attached, granting permissions necessary to create and manage VPC Endpoints associated with intended shared VPC.

Optional:

- `internal_communication_private_hosted_zone_id` (String) ID assigned by AWS to private Route 53 hosted zone associated with intended shared VPC, e.g. 'Z05646003S02O1ENCDCSN'.
